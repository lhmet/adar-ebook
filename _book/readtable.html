<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Análise de Dados Ambientais com R</title>
  <meta name="description" content="Livro baseado nas notas de aula da disciplina FSC1104 do curso de graduação em Meteorologia da UFSM.">
  <meta name="generator" content="bookdown 0.7.10 and GitBook 2.6.7">

  <meta property="og:title" content="Análise de Dados Ambientais com R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Livro baseado nas notas de aula da disciplina FSC1104 do curso de graduação em Meteorologia da UFSM." />
  <meta name="github-repo" content="lhmet/adar-ebook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Análise de Dados Ambientais com R" />
  
  <meta name="twitter:description" content="Livro baseado nas notas de aula da disciplina FSC1104 do curso de graduação em Meteorologia da UFSM." />
  

<meta name="author" content="Jônatan Tatsch">


<meta name="date" content="2018-06-17">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="dados-de-pacotes-do-r.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; background-color: #ffffff; color: #1f1c1b; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; background-color: #ffffff; color: #a0a0a0; border-right: 1px solid #a0a0a0; }
td.sourceCode { padding-left: 5px; }
pre, code { color: #1f1c1b; background-color: #ffffff; }
code > span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code > span.dt { color: #0057ae; } /* DataType */
code > span.dv { color: #b08000; } /* DecVal */
code > span.bn { color: #b08000; } /* BaseN */
code > span.fl { color: #b08000; } /* Float */
code > span.cn { color: #aa5500; } /* Constant */
code > span.ch { color: #924c9d; } /* Char */
code > span.sc { color: #3daee9; } /* SpecialChar */
code > span.st { color: #bf0303; } /* String */
code > span.vs { color: #bf0303; } /* VerbatimString */
code > span.ss { color: #ff5500; } /* SpecialString */
code > span.im { color: #ff5500; } /* Import */
code > span.co { color: #898887; } /* Comment */
code > span.do { color: #607880; } /* Documentation */
code > span.an { color: #ca60ca; } /* Annotation */
code > span.cv { color: #0095ff; } /* CommentVar */
code > span.ot { color: #006e28; } /* Other */
code > span.fu { color: #644a9b; } /* Function */
code > span.va { color: #0057ae; } /* Variable */
code > span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code > span.op { color: #1f1c1b; } /* Operator */
code > span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code > span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code > span.pp { color: #006e28; } /* Preprocessor */
code > span.at { color: #0057ae; } /* Attribute */
code > span.re { color: #0057ae; } /* RegionMarker */
code > span.in { color: #b08000; } /* Information */
code > span.wa { color: #bf0303; } /* Warning */
code > span.al { color: #bf0303; font-weight: bold; } /* Alert */
code > span.er { color: #bf0303; text-decoration: underline; } /* Error */
code > span. { color: #1f1c1b; } /* Normal */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Análise de Dados Ambientais com R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Apresentação</a></li>
<li class="part"><span><b>I Introdução</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Motivação</a><ul>
<li class="chapter" data-level="1.1" data-path="analise-de-dados-meteorologicos.html"><a href="analise-de-dados-meteorologicos.html"><i class="fa fa-check"></i><b>1.1</b> Análise de dados meteorológicos</a></li>
<li class="chapter" data-level="1.2" data-path="ciencia-de-dados.html"><a href="ciencia-de-dados.html"><i class="fa fa-check"></i><b>1.2</b> Ciência de dados</a></li>
<li class="chapter" data-level="1.3" data-path="etapas-para-abordagem-de-um-problema.html"><a href="etapas-para-abordagem-de-um-problema.html"><i class="fa fa-check"></i><b>1.3</b> Etapas para abordagem de um problema</a></li>
<li class="chapter" data-level="1.4" data-path="programacao-computacional.html"><a href="programacao-computacional.html"><i class="fa fa-check"></i><b>1.4</b> Programação computacional</a></li>
<li class="chapter" data-level="1.5" data-path="section.html"><a href="section.html"><i class="fa fa-check"></i><b>1.5</b> <img src="images/logo_r.png" width="20"></a></li>
<li class="chapter" data-level="1.6" data-path="por-que-o-r.html"><a href="por-que-o-r.html"><i class="fa fa-check"></i><b>1.6</b> Por que o R?</a></li>
<li class="chapter" data-level="1.7" data-path="pacotes-da-comunidade-do-r.html"><a href="pacotes-da-comunidade-do-r.html"><i class="fa fa-check"></i><b>1.7</b> Pacotes da comunidade do R</a></li>
<li class="chapter" data-level="1.8" data-path="por-que-um-meteorologista-usaria-o-r.html"><a href="por-que-um-meteorologista-usaria-o-r.html"><i class="fa fa-check"></i><b>1.8</b> Por que um meteorologista usaria o R?</a></li>
<li class="chapter" data-level="1.9" data-path="r-nao-e-perfeito.html"><a href="r-nao-e-perfeito.html"><i class="fa fa-check"></i><b>1.9</b> R não é perfeito!</a></li>
<li class="chapter" data-level="1.10" data-path="para-saber-mais-sobre-o-r.html"><a href="para-saber-mais-sobre-o-r.html"><i class="fa fa-check"></i><b>1.10</b> Para saber mais sobre o R</a></li>
</ul></li>
<li class="part"><span><b>II Configuração</b></span></li>
<li class="chapter" data-level="2" data-path="install.html"><a href="install.html"><i class="fa fa-check"></i><b>2</b> Instalação do R e RStudio</a><ul>
<li class="chapter" data-level="2.1" data-path="instalando-o.html"><a href="instalando-o.html"><i class="fa fa-check"></i><b>2.1</b> Instalando o <img src="images/logo_r.png" width="20"></a><ul>
<li class="chapter" data-level="2.1.1" data-path="instalando-o.html"><a href="instalando-o.html#windows"><i class="fa fa-check"></i><b>2.1.1</b> Windows</a></li>
<li class="chapter" data-level="2.1.2" data-path="instalando-o.html"><a href="instalando-o.html#linux"><i class="fa fa-check"></i><b>2.1.2</b> Linux</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="install-pck.html"><a href="install-pck.html"><i class="fa fa-check"></i><b>2.2</b> Pacotes do R</a><ul>
<li class="chapter" data-level="2.2.1" data-path="install-pck.html"><a href="install-pck.html#da-internet"><i class="fa fa-check"></i><b>2.2.1</b> Da internet</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="install-rstudio.html"><a href="install-rstudio.html"><i class="fa fa-check"></i><b>2.3</b> RStudio no Ubuntu</a></li>
</ul></li>
<li class="part"><span><b>III Interação</b></span></li>
<li class="chapter" data-level="3" data-path="iu.html"><a href="iu.html"><i class="fa fa-check"></i><b>3</b> Interface do Usuário</a><ul>
<li class="chapter" data-level="3.1" data-path="no-modo-interativo.html"><a href="no-modo-interativo.html"><i class="fa fa-check"></i><b>3.1</b> <img src="images/logo_r.png" width="20"> no modo interativo</a><ul>
<li class="chapter" data-level="3.1.1" data-path="no-modo-interativo.html"><a href="no-modo-interativo.html#expressInSeq"><i class="fa fa-check"></i><b>3.1.1</b> Expressões em sequência</a></li>
<li class="chapter" data-level="3.1.2" data-path="no-modo-interativo.html"><a href="no-modo-interativo.html#navegacao-entre-as-expressoes-ja-avaliadas"><i class="fa fa-check"></i><b>3.1.2</b> Navegação entre as expressões já avaliadas</a></li>
<li class="chapter" data-level="3.1.3" data-path="no-modo-interativo.html"><a href="no-modo-interativo.html#comentarios"><i class="fa fa-check"></i><b>3.1.3</b> Comentários</a></li>
<li class="chapter" data-level="3.1.4" data-path="no-modo-interativo.html"><a href="no-modo-interativo.html#auto-preenchimento-de-funcoes"><i class="fa fa-check"></i><b>3.1.4</b> Auto preenchimento de funções</a></li>
<li class="chapter" data-level="3.1.5" data-path="no-modo-interativo.html"><a href="no-modo-interativo.html#primeiro-script"><i class="fa fa-check"></i><b>3.1.5</b> Primeiro <em>script</em></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="no-modo-de-processamento-em-lote.html"><a href="no-modo-de-processamento-em-lote.html"><i class="fa fa-check"></i><b>3.2</b> <img src="images/logo_r.png" width="20"> no modo de processamento em lote</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>4</b> RStudio</a><ul>
<li class="chapter" data-level="4.1" data-path="visao-geral-do-rstudio.html"><a href="visao-geral-do-rstudio.html"><i class="fa fa-check"></i><b>4.1</b> Visão geral do RStudio</a></li>
</ul></li>
<li class="part"><span><b>IV Fundamentos do R</b></span></li>
<li class="chapter" data-level="5" data-path="operbasic.html"><a href="operbasic.html"><i class="fa fa-check"></i><b>5</b> Operações básicas</a><ul>
<li class="chapter" data-level="5.1" data-path="convencao.html"><a href="convencao.html"><i class="fa fa-check"></i><b>5.1</b> Convenção</a></li>
<li class="chapter" data-level="5.2" data-path="calculadora.html"><a href="calculadora.html"><i class="fa fa-check"></i><b>5.2</b> Calculadora</a><ul>
<li class="chapter" data-level="5.2.1" data-path="calculadora.html"><a href="calculadora.html#aritmetica-basica"><i class="fa fa-check"></i><b>5.2.1</b> Aritmética básica</a></li>
<li class="chapter" data-level="5.2.2" data-path="calculadora.html"><a href="calculadora.html#constantes"><i class="fa fa-check"></i><b>5.2.2</b> Constantes</a></li>
<li class="chapter" data-level="5.2.3" data-path="calculadora.html"><a href="calculadora.html#funcoes-matematicas-internas"><i class="fa fa-check"></i><b>5.2.3</b> Funções matemáticas internas</a></li>
<li class="chapter" data-level="5.2.4" data-path="calculadora.html"><a href="calculadora.html#valores-numericos-especiais"><i class="fa fa-check"></i><b>5.2.4</b> Valores numéricos especiais</a></li>
<li class="chapter" data-level="5.2.5" data-path="calculadora.html"><a href="calculadora.html#notacao-cientifica-e-numero-de-digitos"><i class="fa fa-check"></i><b>5.2.5</b> Notação científica e número de dígitos</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="variaveis.html"><a href="variaveis.html"><i class="fa fa-check"></i><b>5.3</b> Variáveis</a><ul>
<li class="chapter" data-level="5.3.1" data-path="variaveis.html"><a href="variaveis.html#formas-de-atribuicao"><i class="fa fa-check"></i><b>5.3.1</b> Formas de atribuição</a></li>
<li class="chapter" data-level="5.3.2" data-path="variaveis.html"><a href="variaveis.html#removendo-variaveis"><i class="fa fa-check"></i><b>5.3.2</b> Removendo variáveis</a></li>
<li class="chapter" data-level="5.3.3" data-path="variaveis.html"><a href="variaveis.html#nomeando-variaveis"><i class="fa fa-check"></i><b>5.3.3</b> Nomeando variáveis</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="exercicios.html"><a href="exercicios.html"><i class="fa fa-check"></i><b>5.4</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="datatype.html"><a href="datatype.html"><i class="fa fa-check"></i><b>6</b> Tipos de dados</a><ul>
<li class="chapter" data-level="6.1" data-path="classes-de-dados.html"><a href="classes-de-dados.html"><i class="fa fa-check"></i><b>6.1</b> Classes de dados</a><ul>
<li class="chapter" data-level="6.1.1" data-path="classes-de-dados.html"><a href="classes-de-dados.html#numeros"><i class="fa fa-check"></i><b>6.1.1</b> Números</a></li>
<li class="chapter" data-level="6.1.2" data-path="classes-de-dados.html"><a href="classes-de-dados.html#caractere"><i class="fa fa-check"></i><b>6.1.2</b> Caractere</a></li>
<li class="chapter" data-level="6.1.3" data-path="classes-de-dados.html"><a href="classes-de-dados.html#logico"><i class="fa fa-check"></i><b>6.1.3</b> Lógico</a></li>
<li class="chapter" data-level="6.1.4" data-path="classes-de-dados.html"><a href="classes-de-dados.html#datas-e-horarios"><i class="fa fa-check"></i><b>6.1.4</b> Datas e horários</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="testes-sobre-tipos-de-dados.html"><a href="testes-sobre-tipos-de-dados.html"><i class="fa fa-check"></i><b>6.2</b> Testes sobre tipos de dados</a></li>
<li class="chapter" data-level="6.3" data-path="conversao-entre-tipos-de-dados.html"><a href="conversao-entre-tipos-de-dados.html"><i class="fa fa-check"></i><b>6.3</b> Conversão entre tipos de dados</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="estrutura-dados.html"><a href="estrutura-dados.html"><i class="fa fa-check"></i><b>7</b> Estrutura de dados</a><ul>
<li class="chapter" data-level="7.1" data-path="vetor.html"><a href="vetor.html"><i class="fa fa-check"></i><b>7.1</b> Vetor</a><ul>
<li class="chapter" data-level="7.1.1" data-path="vetor.html"><a href="vetor.html#vetores-atomicos"><i class="fa fa-check"></i><b>7.1.1</b> Vetores atômicos</a></li>
<li class="chapter" data-level="7.1.2" data-path="vetor.html"><a href="vetor.html#operacoes-com-vetores"><i class="fa fa-check"></i><b>7.1.2</b> Operações com vetores</a></li>
<li class="chapter" data-level="7.1.3" data-path="vetor.html"><a href="vetor.html#sequencias"><i class="fa fa-check"></i><b>7.1.3</b> Sequências</a></li>
<li class="chapter" data-level="7.1.4" data-path="vetor.html"><a href="vetor.html#index-vetores"><i class="fa fa-check"></i><b>7.1.4</b> Indexação de vetores</a></li>
<li class="chapter" data-level="7.1.5" data-path="vetor.html"><a href="vetor.html#substituicao-de-elementos-de-um-vetor"><i class="fa fa-check"></i><b>7.1.5</b> Substituição de elementos de um vetor</a></li>
<li class="chapter" data-level="7.1.6" data-path="vetor.html"><a href="vetor.html#criacao-de-vetores-com-vector"><i class="fa fa-check"></i><b>7.1.6</b> Criação de vetores com <code>vector</code></a></li>
<li class="chapter" data-level="7.1.7" data-path="vetor.html"><a href="vetor.html#vetores-nulos-e-elementos-faltantes"><i class="fa fa-check"></i><b>7.1.7</b> Vetores nulos e elementos faltantes</a></li>
<li class="chapter" data-level="7.1.8" data-path="vetor.html"><a href="vetor.html#diferenca-entre-na-e-null"><i class="fa fa-check"></i><b>7.1.8</b> Diferença entre <code>NA</code> e <code>NULL</code></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="matriz.html"><a href="matriz.html"><i class="fa fa-check"></i><b>7.2</b> Matriz</a><ul>
<li class="chapter" data-level="7.2.1" data-path="matriz.html"><a href="matriz.html#criacao-de-matrizes"><i class="fa fa-check"></i><b>7.2.1</b> Criação de matrizes</a></li>
<li class="chapter" data-level="7.2.2" data-path="matriz.html"><a href="matriz.html#nomes-lin-col-mat"><i class="fa fa-check"></i><b>7.2.2</b> Nomes das linhas e colunas de uma matriz</a></li>
<li class="chapter" data-level="7.2.3" data-path="matriz.html"><a href="matriz.html#indexacao-de-matrizes"><i class="fa fa-check"></i><b>7.2.3</b> Indexação de matrizes</a></li>
<li class="chapter" data-level="7.2.4" data-path="matriz.html"><a href="matriz.html#numero-de-linhas-e-colunas-de-uma-matriz"><i class="fa fa-check"></i><b>7.2.4</b> Número de linhas e colunas de uma matriz</a></li>
<li class="chapter" data-level="7.2.5" data-path="matriz.html"><a href="matriz.html#adicao-de-linhas-e-colunas-a-uma-matriz"><i class="fa fa-check"></i><b>7.2.5</b> Adição de linhas e colunas a uma matriz</a></li>
<li class="chapter" data-level="7.2.6" data-path="matriz.html"><a href="matriz.html#matriz-transposta-e-diagonal"><i class="fa fa-check"></i><b>7.2.6</b> Matriz transposta e diagonal</a></li>
<li class="chapter" data-level="7.2.7" data-path="matriz.html"><a href="matriz.html#conversao-de-matriz-para-vetor"><i class="fa fa-check"></i><b>7.2.7</b> Conversão de matriz para vetor</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="arranjo.html"><a href="arranjo.html"><i class="fa fa-check"></i><b>7.3</b> Arranjo</a><ul>
<li class="chapter" data-level="7.3.1" data-path="arranjo.html"><a href="arranjo.html#criacao-1"><i class="fa fa-check"></i><b>7.3.1</b> Criação</a></li>
<li class="chapter" data-level="7.3.2" data-path="arranjo.html"><a href="arranjo.html#indexacao"><i class="fa fa-check"></i><b>7.3.2</b> Indexação</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="lista.html"><a href="lista.html"><i class="fa fa-check"></i><b>7.4</b> Lista</a><ul>
<li class="chapter" data-level="7.4.1" data-path="lista.html"><a href="lista.html#criacao-2"><i class="fa fa-check"></i><b>7.4.1</b> Criação</a></li>
<li class="chapter" data-level="7.4.2" data-path="lista.html"><a href="lista.html#indexacao-1"><i class="fa fa-check"></i><b>7.4.2</b> Indexação</a></li>
<li class="chapter" data-level="7.4.3" data-path="lista.html"><a href="lista.html#conversao-de-lista-para-vetor-e-vice-versa."><i class="fa fa-check"></i><b>7.4.3</b> Conversão de lista para vetor e vice-versa.</a></li>
<li class="chapter" data-level="7.4.4" data-path="lista.html"><a href="lista.html#conversao-de-list-para-data.frame"><i class="fa fa-check"></i><b>7.4.4</b> Conversão de <code>list</code> para <code>data.frame</code></a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="dataframe.html"><a href="dataframe.html"><i class="fa fa-check"></i><b>7.5</b> Dataframe</a><ul>
<li class="chapter" data-level="7.5.1" data-path="dataframe.html"><a href="dataframe.html#criacao-3"><i class="fa fa-check"></i><b>7.5.1</b> Criação</a></li>
<li class="chapter" data-level="7.5.2" data-path="dataframe.html"><a href="dataframe.html#atributos-de-um-dataframe"><i class="fa fa-check"></i><b>7.5.2</b> Atributos de um <em>dataframe</em></a></li>
<li class="chapter" data-level="7.5.3" data-path="dataframe.html"><a href="dataframe.html#acesso-as-variaveis-de-um-dataframe"><i class="fa fa-check"></i><b>7.5.3</b> Acesso as variáveis de um <em>dataframe</em></a></li>
<li class="chapter" data-level="7.5.4" data-path="dataframe.html"><a href="dataframe.html#indexacao-selecao-e-substituicao"><i class="fa fa-check"></i><b>7.5.4</b> Indexação, seleção e substituição</a></li>
<li class="chapter" data-level="7.5.5" data-path="dataframe.html"><a href="dataframe.html#combinando-dataframes"><i class="fa fa-check"></i><b>7.5.5</b> Combinando <em>dataframes</em></a></li>
<li class="chapter" data-level="7.5.6" data-path="dataframe.html"><a href="dataframe.html#teste-e-coercao"><i class="fa fa-check"></i><b>7.5.6</b> Teste e Coerção</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="exercicios-1.html"><a href="exercicios-1.html"><i class="fa fa-check"></i><b>7.6</b> Exercícios</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="io.html"><a href="io.html"><i class="fa fa-check"></i><b>8</b> Entrada e saída de dados</a><ul>
<li class="chapter" data-level="8.1" data-path="pre-requisitos.html"><a href="pre-requisitos.html"><i class="fa fa-check"></i><b>8.1</b> Pré-requisitos</a></li>
<li class="chapter" data-level="8.2" data-path="diretorio-de-trabalho.html"><a href="diretorio-de-trabalho.html"><i class="fa fa-check"></i><b>8.2</b> Diretório de trabalho</a></li>
<li class="chapter" data-level="8.3" data-path="boas-praticas-para-importacao-e-exportacao-de-dados.html"><a href="boas-praticas-para-importacao-e-exportacao-de-dados.html"><i class="fa fa-check"></i><b>8.3</b> Boas práticas para importação e exportação de dados</a></li>
<li class="chapter" data-level="8.4" data-path="arquivos-texto.html"><a href="arquivos-texto.html"><i class="fa fa-check"></i><b>8.4</b> Arquivos texto</a><ul>
<li class="chapter" data-level="8.4.1" data-path="arquivos-texto.html"><a href="arquivos-texto.html#Rio"><i class="fa fa-check"></i><b>8.4.1</b> <strong>rio</strong></a></li>
<li class="chapter" data-level="8.4.2" data-path="arquivos-texto.html"><a href="arquivos-texto.html#arquivos-texto-nao-estruturados"><i class="fa fa-check"></i><b>8.4.2</b> Arquivos texto não estruturados</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="arquivos-binarios.html"><a href="arquivos-binarios.html"><i class="fa fa-check"></i><b>8.5</b> Arquivos binários</a><ul>
<li class="chapter" data-level="8.5.1" data-path="arquivos-binarios.html"><a href="arquivos-binarios.html#formatos-binarios-nativos-do-r"><i class="fa fa-check"></i><b>8.5.1</b> Formatos binários nativos do R</a></li>
<li class="chapter" data-level="8.5.2" data-path="arquivos-binarios.html"><a href="arquivos-binarios.html#netcdf-network-common-data-form"><i class="fa fa-check"></i><b>8.5.2</b> NetCDF (Network Common Data Form)</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="arquivos-excel.html"><a href="arquivos-excel.html"><i class="fa fa-check"></i><b>8.6</b> Arquivos Excel</a><ul>
<li class="chapter" data-level="8.6.1" data-path="arquivos-excel.html"><a href="arquivos-excel.html#como-usar-1"><i class="fa fa-check"></i><b>8.6.1</b> Como usar</a></li>
<li class="chapter" data-level="8.6.2" data-path="arquivos-excel.html"><a href="arquivos-excel.html#escrita-de-arquivos-excel-no-formato-.xls"><i class="fa fa-check"></i><b>8.6.2</b> Escrita de arquivos excel no formato <code>.xls</code></a></li>
<li class="chapter" data-level="8.6.3" data-path="arquivos-excel.html"><a href="arquivos-excel.html#escrita-de-arquivos-excel-no-formato-.xlsx"><i class="fa fa-check"></i><b>8.6.3</b> Escrita de arquivos excel no formato <code>.xlsx</code></a></li>
<li class="chapter" data-level="8.6.4" data-path="arquivos-excel.html"><a href="arquivos-excel.html#estrutura-de-dados-nao-tabulares"><i class="fa fa-check"></i><b>8.6.4</b> Estrutura de dados não tabulares</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="para-saber-mais.html"><a href="para-saber-mais.html"><i class="fa fa-check"></i><b>8.7</b> Para saber mais</a></li>
<li class="chapter" data-level="8.8" data-path="exercicios-2.html"><a href="exercicios-2.html"><i class="fa fa-check"></i><b>8.8</b> Exercícios</a></li>
</ul></li>
<li class="part"><span><b>V Ferramentas modernas do R</b></span></li>
<li class="chapter" data-level="9" data-path="data-wrangle.html"><a href="data-wrangle.html"><i class="fa fa-check"></i><b>9</b> Processamento de dados</a><ul>
<li class="chapter" data-level="9.1" data-path="pre-requisitos-2.html"><a href="pre-requisitos-2.html"><i class="fa fa-check"></i><b>9.1</b> Pré-requisitos</a></li>
<li class="chapter" data-level="9.2" data-path="tibbles-data-frames-aperfeicoado.html"><a href="tibbles-data-frames-aperfeicoado.html"><i class="fa fa-check"></i><b>9.2</b> <em>tibbles</em>: <em>data frames</em> aperfeiçoado</a></li>
<li class="chapter" data-level="9.3" data-path="restruturacao-de-dados.html"><a href="restruturacao-de-dados.html"><i class="fa fa-check"></i><b>9.3</b> Restruturação de dados</a><ul>
<li class="chapter" data-level="9.3.1" data-path="restruturacao-de-dados.html"><a href="restruturacao-de-dados.html#dados-arrumados"><i class="fa fa-check"></i><b>9.3.1</b> Dados arrumados</a></li>
<li class="chapter" data-level="9.3.2" data-path="restruturacao-de-dados.html"><a href="restruturacao-de-dados.html#tidyr"><i class="fa fa-check"></i><b>9.3.2</b> tidyr</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="manipulacao-de-dados.html"><a href="manipulacao-de-dados.html"><i class="fa fa-check"></i><b>9.4</b> Manipulação de dados</a><ul>
<li class="chapter" data-level="9.4.1" data-path="manipulacao-de-dados.html"><a href="manipulacao-de-dados.html#operador-pipe"><i class="fa fa-check"></i><b>9.4.1</b> Operador Pipe <code>%&gt;%</code></a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="exercicios-3.html"><a href="exercicios-3.html"><i class="fa fa-check"></i><b>9.5</b> Exercícios</a></li>
<li class="chapter" data-level="9.6" data-path="exemplo-de-manipulacao-de-dados.html"><a href="exemplo-de-manipulacao-de-dados.html"><i class="fa fa-check"></i><b>9.6</b> Exemplo de manipulação de dados</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="referencias.html"><a href="referencias.html"><i class="fa fa-check"></i>Referências</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="oper-mat.html"><a href="oper-mat.html"><i class="fa fa-check"></i><b>A</b> Operações adicionais com matrizes</a><ul>
<li class="chapter" data-level="A.1" data-path="funcao-dim.html"><a href="funcao-dim.html"><i class="fa fa-check"></i><b>A.1</b> Função <code>dim()</code></a></li>
<li class="chapter" data-level="A.2" data-path="atribuicao-por-indexacao.html"><a href="atribuicao-por-indexacao.html"><i class="fa fa-check"></i><b>A.2</b> Atribuição por indexação</a></li>
<li class="chapter" data-level="A.3" data-path="operacoes-matriciais.html"><a href="operacoes-matriciais.html"><i class="fa fa-check"></i><b>A.3</b> Operações matriciais</a><ul>
<li class="chapter" data-level="A.3.1" data-path="operacoes-matriciais.html"><a href="operacoes-matriciais.html#multiplicacao-matricial"><i class="fa fa-check"></i><b>A.3.1</b> Multiplicação matricial</a></li>
<li class="chapter" data-level="A.3.2" data-path="operacoes-matriciais.html"><a href="operacoes-matriciais.html#adicao-matricial"><i class="fa fa-check"></i><b>A.3.2</b> Adição matricial</a></li>
<li class="chapter" data-level="A.3.3" data-path="operacoes-matriciais.html"><a href="operacoes-matriciais.html#produto-escalar"><i class="fa fa-check"></i><b>A.3.3</b> Produto escalar</a></li>
<li class="chapter" data-level="A.3.4" data-path="operacoes-matriciais.html"><a href="operacoes-matriciais.html#determinante"><i class="fa fa-check"></i><b>A.3.4</b> Determinante</a></li>
<li class="chapter" data-level="A.3.5" data-path="operacoes-matriciais.html"><a href="operacoes-matriciais.html#solucao-de-sistemas-lineares"><i class="fa fa-check"></i><b>A.3.5</b> Solução de sistemas lineares</a></li>
<li class="chapter" data-level="A.3.6" data-path="operacoes-matriciais.html"><a href="operacoes-matriciais.html#produto-cartesiano"><i class="fa fa-check"></i><b>A.3.6</b> Produto cartesiano</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="B" data-path="funcoes-nativas-do-r-para-importar-e-exportar-dados.html"><a href="funcoes-nativas-do-r-para-importar-e-exportar-dados.html"><i class="fa fa-check"></i><b>B</b> Funções nativas do R para importar e exportar dados</a><ul>
<li class="chapter" data-level="B.1" data-path="amostras-pequenas-de-dados.html"><a href="amostras-pequenas-de-dados.html"><i class="fa fa-check"></i><b>B.1</b> Amostras pequenas de dados</a><ul>
<li class="chapter" data-level="B.1.1" data-path="amostras-pequenas-de-dados.html"><a href="amostras-pequenas-de-dados.html#scan"><i class="fa fa-check"></i><b>B.1.1</b> scan()</a></li>
<li class="chapter" data-level="B.1.2" data-path="amostras-pequenas-de-dados.html"><a href="amostras-pequenas-de-dados.html#readline"><i class="fa fa-check"></i><b>B.1.2</b> readline()</a></li>
<li class="chapter" data-level="B.1.3" data-path="amostras-pequenas-de-dados.html"><a href="amostras-pequenas-de-dados.html#impressao-na-tela"><i class="fa fa-check"></i><b>B.1.3</b> Impressão na tela</a></li>
<li class="chapter" data-level="B.1.4" data-path="amostras-pequenas-de-dados.html"><a href="amostras-pequenas-de-dados.html#textconnection"><i class="fa fa-check"></i><b>B.1.4</b> textConnection()</a></li>
</ul></li>
<li class="chapter" data-level="B.2" data-path="exportando-e-recuperando-objetos-do-r-no-formato-textual.html"><a href="exportando-e-recuperando-objetos-do-r-no-formato-textual.html"><i class="fa fa-check"></i><b>B.2</b> Exportando e recuperando objetos do R no formato textual</a><ul>
<li class="chapter" data-level="B.2.1" data-path="exportando-e-recuperando-objetos-do-r-no-formato-textual.html"><a href="exportando-e-recuperando-objetos-do-r-no-formato-textual.html#dput-dget-dump-e-source."><i class="fa fa-check"></i><b>B.2.1</b> <code>dput()</code>, <code>dget</code>, <code>dump</code> e <code>source</code>.</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="dados-de-pacotes-do-r.html"><a href="dados-de-pacotes-do-r.html"><i class="fa fa-check"></i><b>B.3</b> Dados de pacotes do R</a></li>
<li class="chapter" data-level="B.4" data-path="readtable.html"><a href="readtable.html"><i class="fa fa-check"></i><b>B.4</b> Leitura de arquivos texto com funções da base do R</a><ul>
<li class="chapter" data-level="B.4.1" data-path="readtable.html"><a href="readtable.html#dados-hidrometeorologicos-brasileiros"><i class="fa fa-check"></i><b>B.4.1</b> Dados hidrometeorológicos brasileiros</a></li>
<li class="chapter" data-level="B.4.2" data-path="readtable.html"><a href="readtable.html#arquivos-formatados-com-largura-fixa"><i class="fa fa-check"></i><b>B.4.2</b> Arquivos formatados com largura fixa</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/lhmet/adar-ebook" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Análise de Dados Ambientais com R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="readtable" class="section level2">
<h2><span class="header-section-number">B.4</span> Leitura de arquivos texto com funções da base do R</h2>
<p>A função nativa do <img src="images/logo_r.png" width="20"> mais usada para leitura de dados de um arquivo texto é a <code>read.table()</code>. Os dados lidos são armazenados em um dataframe.</p>
<p>Essa função possui diversos parâmetros para especificar a importação de acordo com as peculiaridades do formato de dados do arquivo.</p>
<p>O valor <em>default</em> do parâmetro <code>sep</code> é um ou mais caracteres de <code>espaço</code> e <code>tabs</code>. Devido as diversas opções de separadores existem outras funções envelopes da <code>read.table()</code>, com a diferença no separador, por exemplo as funções: <code>read.csv(), read.csv2(), read.delim()</code> que chamam a <code>read.table()</code>, dentro corpo da função, com o argumento <code>sep</code> definido como <code>,</code>, <code>;</code> e <code>\t</code>, respectivamente. Para detalhes sobre essas funções o <em>help</em> de cada uma. Uma vez que essas funções aceitam qualquer argumento da <code>read.table()</code> elas são mais convenientes que usar a <code>read.table()</code> e configurar os argumentos apropriados manualmente.</p>
<p>Alguns argumentos da função <code>read.table()</code> são:</p>
<ul>
<li><code>file</code> nome do arquivo</li>
<li><code>header</code> lógico (TRUE ou FALSE) indicando se o arquivo tem ou não linha de cabeçalho</li>
<li><code>sep</code> um caractere indicando como as colunas são separadas</li>
<li><code>colClasses</code>, um vetor caractere indicando as classes de cada coluna no conjunto de dados</li>
<li><code>nrows</code>, número de linhas no conjunto de dados</li>
<li><code>comment.char</code>, um caractere indicando o caractere usado como comentário (para ignorar essas linhas)</li>
<li><code>skip</code>, o número de linhas que devem ser “puladas” desde o início do arquivo</li>
<li><code>stringsAsFactors</code>, lógico, as variáveis do tipo <code>character</code> devem ser codificadas como <code>factor</code>?</li>
</ul>
<p>Esse último argumento pode ser definido também através da configuração global de opções no R pelo comando: <code>options(stringsAsFactors=FALSE)</code>.</p>
<p>Quando se faz a leitura de dados com <code>read.table(&quot;nome_do_arquivo&quot;)</code> o R automaticamente:</p>
<ul>
<li>pula linhas que começam com ‘#’</li>
<li>descobre quantas linhas tem o arquivo e quanta memória precisa ser alocada</li>
<li>descobre qual o tipo de variável em cada coluna</li>
</ul>
<p>Vamos ver alguns exemplos de leitura de dados hidrometeorológicos no formato texto amplamente usados em aplicações da Meteorologia.</p>
<div id="dados-hidrometeorologicos-brasileiros" class="section level3">
<h3><span class="header-section-number">B.4.1</span> Dados hidrometeorológicos brasileiros</h3>
<div id="hidroweb-ana" class="section level4">
<h4><span class="header-section-number">B.4.1.1</span> <a href="http://hidroweb.ana.gov.br/">hidroweb-ANA</a></h4>
<p>O sistema hidroweb é o maior base de dados hidrológicos brasileira. No trecho de código a seguir baixamos um arquivo de dados de precipitação obtidos no sistema hidroweb que foi salvo no site do livro.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># arquivo de exemplo disponível no GitHub</span>
hidroweb_url_file &lt;-<span class="st"> &quot;https://raw.github.com/lhmet/adar-ufsm/master/data/CHUVAS.TXT&quot;</span>
<span class="co">#arquivo temporário, você pode substituir tempfile() por um caminho de seu computador, p.ex. &quot;~/Downloads/CHUVAS.TXT&quot;</span>
hidroweb_dest_file &lt;-<span class="st"> </span><span class="kw">tempfile</span>()
<span class="kw">download.file</span>(
  <span class="dt">url =</span> hidroweb_url_file, 
  <span class="dt">destfile =</span> hidroweb_dest_file
)</code></pre></div>
<p>Antes de importar os dados você precisa visualizar o arquivo para extrair as informações básicas necessárias para sua importação. Você pode abri-lo em um editor de texto ou</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># caracteres não devem tratados como fatores</span>
<span class="kw">options</span>(<span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
<span class="co"># leitura de dados da ANA</span>
dprec &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="dt">file =</span> hidroweb_url_file, 
                   <span class="dt">skip =</span> <span class="dv">15</span>, 
                   <span class="dt">head =</span> <span class="ot">TRUE</span>, 
                   <span class="dt">fill =</span> <span class="ot">TRUE</span>)
<span class="co"># primeiras linhas</span>
<span class="kw">head</span>(dprec)
<span class="co">#&gt;   X..EstacaoCodigo NivelConsistencia       Data TipoMedicaoChuvas Maxima</span>
<span class="co">#&gt; 1          3054002                 1 01/01/1934                 1     NA</span>
<span class="co">#&gt; 2          3054002                 1 01/02/1934                 1   66.3</span>
<span class="co">#&gt; 3          3054002                 1 01/03/1934                 1   55.0</span>
<span class="co">#&gt; 4          3054002                 1 01/04/1934                 1   54.5</span>
<span class="co">#&gt; 5          3054002                 1 01/05/1934                 1   30.5</span>
<span class="co">#&gt; 6          3054002                 1 01/06/1934                 1   42.5</span>
<span class="co">#&gt;   Total DiaMaxima NumDiasDeChuva MaximaStatus TotalStatus</span>
<span class="co">#&gt; 1    NA        NA             NA            0           0</span>
<span class="co">#&gt; 2 174.7         6             10            1           1</span>
<span class="co">#&gt; 3 160.7         9             10            1           1</span>
<span class="co">#&gt; 4  98.4         1              4            1           1</span>
<span class="co">#&gt; 5 119.4        29              8            1           1</span>
<span class="co">#&gt; 6 191.6        13             11            1           1</span>
<span class="co">#&gt;   NumDiasDeChuvaStatus TotalAnual TotalAnualStatus Chuva01 Chuva02 Chuva03</span>
<span class="co">#&gt; 1                    0         NA                0      NA      NA      NA</span>
<span class="co">#&gt; 2                    0         NA                0    15.5     3.5     0.0</span>
<span class="co">#&gt; 3                    0         NA                0     0.0     0.0     0.0</span>
<span class="co">#&gt; 4                    0         NA                0    54.5     0.0     0.0</span>
<span class="co">#&gt; 5                    1         NA                0     0.0    19.0    26.7</span>
<span class="co">#&gt; 6                    0         NA                0     0.0     0.0    21.5</span>
<span class="co">#&gt;   Chuva04 Chuva05 Chuva06 Chuva07 Chuva08 Chuva09 Chuva10 Chuva11 Chuva12</span>
<span class="co">#&gt; 1      NA    10.5     3.0    11.1     0.0       0     0.0     0.0     0.0</span>
<span class="co">#&gt; 2     0.0    11.9    66.3     1.0    40.0       0     0.0     0.0     1.1</span>
<span class="co">#&gt; 3     0.0     0.0     0.0     0.0     0.0      55    11.7     5.0     0.0</span>
<span class="co">#&gt; 4     0.0     0.0    18.5     0.0    19.5       0     0.0     0.0     0.0</span>
<span class="co">#&gt; 5     0.0     3.2     4.2     0.0     0.0       0     0.0     0.0     0.0</span>
<span class="co">#&gt; 6    12.7     8.7     0.0     0.0     0.0       0     0.0    27.3    37.5</span>
<span class="co">#&gt;   Chuva13 Chuva14 Chuva15 Chuva16 Chuva17 Chuva18 Chuva19 Chuva20 Chuva21</span>
<span class="co">#&gt; 1     0.0     0.0       0    37.6       0    18.4    12.5     0.0     0.0</span>
<span class="co">#&gt; 2    24.7     0.0       0     0.0       0     0.0     0.0     0.0     0.0</span>
<span class="co">#&gt; 3     7.5     9.5       0     3.0       1    23.0     0.0     0.0     0.0</span>
<span class="co">#&gt; 4     0.0     0.0       0     0.0       0     0.0     0.0     0.0     0.0</span>
<span class="co">#&gt; 5     0.0     0.0       0     0.0       0     0.0     0.0     0.0    20.5</span>
<span class="co">#&gt; 6    42.5     0.0       0     0.0       0     0.0     0.0     0.7     3.2</span>
<span class="co">#&gt;   Chuva22 Chuva23 Chuva24 Chuva25 Chuva26 Chuva27 Chuva28 Chuva29 Chuva30</span>
<span class="co">#&gt; 1    67.5    12.3     0.0     0.0       0       0       0     0.0     0.0</span>
<span class="co">#&gt; 2     0.0     0.0     8.2     2.5       0       0       0      NA      NA</span>
<span class="co">#&gt; 3     0.0     0.0     0.0     0.0       0       0       0     0.0    23.5</span>
<span class="co">#&gt; 4     0.0     0.0     0.0     5.9       0       0       0     0.0     0.0</span>
<span class="co">#&gt; 5     0.0     0.0     0.0     1.3       0       0      14    30.5     0.0</span>
<span class="co">#&gt; 6     3.0     0.0    33.5     0.0       0       0       1     0.0     0.0</span>
<span class="co">#&gt;   Chuva31 Chuva01Status Chuva02Status Chuva03Status Chuva04Status</span>
<span class="co">#&gt; 1     0.0             0             0             0             0</span>
<span class="co">#&gt; 2      NA             1             1             1             1</span>
<span class="co">#&gt; 3    21.5             1             1             1             1</span>
<span class="co">#&gt; 4      NA             1             1             1             1</span>
<span class="co">#&gt; 5     0.0             1             1             1             1</span>
<span class="co">#&gt; 6      NA             1             1             1             1</span>
<span class="co">#&gt;   Chuva05Status Chuva06Status Chuva07Status Chuva08Status Chuva09Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             1</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva10Status Chuva11Status Chuva12Status Chuva13Status Chuva14Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             1</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva15Status Chuva16Status Chuva17Status Chuva18Status Chuva19Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             1</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva20Status Chuva21Status Chuva22Status Chuva23Status Chuva24Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             1</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva25Status Chuva26Status Chuva27Status Chuva28Status Chuva29Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             0</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva30Status Chuva31Status  X</span>
<span class="co">#&gt; 1             1             1 NA</span>
<span class="co">#&gt; 2             0             0 NA</span>
<span class="co">#&gt; 3             1             1 NA</span>
<span class="co">#&gt; 4             1             0 NA</span>
<span class="co">#&gt; 5             1             1 NA</span>
<span class="co">#&gt; 6             1             0 NA</span>
<span class="co"># últimas linhas</span>
<span class="kw">tail</span>(dprec)
<span class="co">#&gt;      X..EstacaoCodigo NivelConsistencia       Data TipoMedicaoChuvas</span>
<span class="co">#&gt; 1279          3054002                 2 01/07/2005                 1</span>
<span class="co">#&gt; 1280          3054002                 2 01/08/2005                 1</span>
<span class="co">#&gt; 1281          3054002                 2 01/09/2005                 1</span>
<span class="co">#&gt; 1282          3054002                 2 01/10/2005                 1</span>
<span class="co">#&gt; 1283          3054002                 2 01/11/2005                 1</span>
<span class="co">#&gt; 1284          3054002                 2 01/12/2005                 1</span>
<span class="co">#&gt;      Maxima Total DiaMaxima NumDiasDeChuva MaximaStatus TotalStatus</span>
<span class="co">#&gt; 1279   44.8  69.5         4              4            1           1</span>
<span class="co">#&gt; 1280   19.9  91.4        30              9            1           1</span>
<span class="co">#&gt; 1281   49.8 149.2        24             12            1           1</span>
<span class="co">#&gt; 1282   57.2 145.3         4              6            1           1</span>
<span class="co">#&gt; 1283   14.2  36.0        24              5            1           1</span>
<span class="co">#&gt; 1284   11.2  22.0        31              6            1           1</span>
<span class="co">#&gt;      NumDiasDeChuvaStatus TotalAnual TotalAnualStatus Chuva01 Chuva02</span>
<span class="co">#&gt; 1279                    1     1123.4                1     0.0     0.0</span>
<span class="co">#&gt; 1280                    1     1123.4                1     0.0     0.0</span>
<span class="co">#&gt; 1281                    1     1123.4                1     3.8    11.3</span>
<span class="co">#&gt; 1282                    1     1123.4                1     0.0     0.0</span>
<span class="co">#&gt; 1283                    1     1123.4                1     0.0     0.0</span>
<span class="co">#&gt; 1284                    1     1123.4                1     0.0     0.0</span>
<span class="co">#&gt;      Chuva03 Chuva04 Chuva05 Chuva06 Chuva07 Chuva08 Chuva09 Chuva10</span>
<span class="co">#&gt; 1279       0    44.8     0.0     0.0     0.0       0     0.0     0.0</span>
<span class="co">#&gt; 1280       0     0.0     0.0     0.0     0.5       0     0.1     0.0</span>
<span class="co">#&gt; 1281       0     0.0     0.0     0.0     0.0       0     8.9    24.7</span>
<span class="co">#&gt; 1282       0    57.2    19.6     0.0     0.0       0     0.0     0.0</span>
<span class="co">#&gt; 1283       0     0.0    13.2     6.3     0.0       0     0.0     0.0</span>
<span class="co">#&gt; 1284       0     2.1     1.9     0.0     0.0       0     0.0     0.0</span>
<span class="co">#&gt;      Chuva11 Chuva12 Chuva13 Chuva14 Chuva15 Chuva16 Chuva17 Chuva18</span>
<span class="co">#&gt; 1279     0.0       0       0     0.0     0.0    12.9     9.7     0.0</span>
<span class="co">#&gt; 1280     0.0       0       0     0.0     0.0     0.0     0.0    14.1</span>
<span class="co">#&gt; 1281     9.7       0       0     0.2    15.6     0.1     0.0     3.2</span>
<span class="co">#&gt; 1282     0.0       0       0    46.3     0.0     3.9     0.2     0.0</span>
<span class="co">#&gt; 1283     0.0       0       0     0.0     1.4     0.0     0.9     0.0</span>
<span class="co">#&gt; 1284     0.0       0       0     0.0     0.0     0.0     2.2     0.0</span>
<span class="co">#&gt;      Chuva19 Chuva20 Chuva21 Chuva22 Chuva23 Chuva24 Chuva25 Chuva26</span>
<span class="co">#&gt; 1279     0.0       0     0.0     2.1     0.0     0.0     0.0       0</span>
<span class="co">#&gt; 1280     0.0       0     6.3    19.7     6.4    17.1     0.0       0</span>
<span class="co">#&gt; 1281     4.5       0     0.0     0.0     0.0    49.8     0.0       0</span>
<span class="co">#&gt; 1282     0.0       0     0.0     0.0     0.0     0.0    18.1       0</span>
<span class="co">#&gt; 1283     0.0       0     0.0     0.0     0.0    14.2     0.0       0</span>
<span class="co">#&gt; 1284     0.7       0     0.0     0.0     0.0     0.0     0.0       0</span>
<span class="co">#&gt;      Chuva27 Chuva28 Chuva29 Chuva30 Chuva31 Chuva01Status Chuva02Status</span>
<span class="co">#&gt; 1279       0       0     0.0     0.0     0.0             1             1</span>
<span class="co">#&gt; 1280       0       0     7.3    19.9     0.0             1             1</span>
<span class="co">#&gt; 1281       0       0     0.0    17.4      NA             1             1</span>
<span class="co">#&gt; 1282       0       0     0.0     0.0     0.0             1             1</span>
<span class="co">#&gt; 1283       0       0     0.0     0.0      NA             1             1</span>
<span class="co">#&gt; 1284       0       0     0.0     3.9    11.2             1             1</span>
<span class="co">#&gt;      Chuva03Status Chuva04Status Chuva05Status Chuva06Status Chuva07Status</span>
<span class="co">#&gt; 1279             1             1             1             1             1</span>
<span class="co">#&gt; 1280             1             1             1             1             1</span>
<span class="co">#&gt; 1281             1             1             1             1             1</span>
<span class="co">#&gt; 1282             1             1             1             1             1</span>
<span class="co">#&gt; 1283             1             1             1             1             1</span>
<span class="co">#&gt; 1284             1             1             1             1             1</span>
<span class="co">#&gt;      Chuva08Status Chuva09Status Chuva10Status Chuva11Status Chuva12Status</span>
<span class="co">#&gt; 1279             1             1             1             1             1</span>
<span class="co">#&gt; 1280             1             1             1             1             1</span>
<span class="co">#&gt; 1281             1             1             1             1             1</span>
<span class="co">#&gt; 1282             1             1             1             1             1</span>
<span class="co">#&gt; 1283             1             1             1             1             1</span>
<span class="co">#&gt; 1284             1             1             1             1             1</span>
<span class="co">#&gt;      Chuva13Status Chuva14Status Chuva15Status Chuva16Status Chuva17Status</span>
<span class="co">#&gt; 1279             1             1             1             1             1</span>
<span class="co">#&gt; 1280             1             1             1             1             1</span>
<span class="co">#&gt; 1281             1             1             1             1             1</span>
<span class="co">#&gt; 1282             1             1             1             1             1</span>
<span class="co">#&gt; 1283             1             1             1             1             1</span>
<span class="co">#&gt; 1284             1             1             1             1             1</span>
<span class="co">#&gt;      Chuva18Status Chuva19Status Chuva20Status Chuva21Status Chuva22Status</span>
<span class="co">#&gt; 1279             1             1             1             1             1</span>
<span class="co">#&gt; 1280             1             1             1             1             1</span>
<span class="co">#&gt; 1281             1             1             1             1             1</span>
<span class="co">#&gt; 1282             1             1             1             1             1</span>
<span class="co">#&gt; 1283             1             1             1             1             1</span>
<span class="co">#&gt; 1284             1             1             1             1             1</span>
<span class="co">#&gt;      Chuva23Status Chuva24Status Chuva25Status Chuva26Status Chuva27Status</span>
<span class="co">#&gt; 1279             1             1             1             1             1</span>
<span class="co">#&gt; 1280             1             1             1             1             1</span>
<span class="co">#&gt; 1281             1             1             1             1             1</span>
<span class="co">#&gt; 1282             1             1             1             1             1</span>
<span class="co">#&gt; 1283             1             1             1             1             1</span>
<span class="co">#&gt; 1284             1             1             1             1             1</span>
<span class="co">#&gt;      Chuva28Status Chuva29Status Chuva30Status Chuva31Status  X</span>
<span class="co">#&gt; 1279             1             1             1             1 NA</span>
<span class="co">#&gt; 1280             1             1             1             1 NA</span>
<span class="co">#&gt; 1281             1             1             1             0 NA</span>
<span class="co">#&gt; 1282             1             1             1             1 NA</span>
<span class="co">#&gt; 1283             1             1             1             0 NA</span>
<span class="co">#&gt; 1284             1             1             1             1 NA</span>
 <span class="co"># corrigindo nome da primeira coluna</span>
 <span class="kw">names</span>(dprec)[<span class="dv">1</span>] &lt;-<span class="st"> &quot;EstacaoCodigo&quot;</span>
 <span class="co"># removendo última coluna que só tem NAs</span>
 dprec &lt;-<span class="st"> </span>dprec[ , <span class="op">-</span><span class="kw">ncol</span>(dprec)]
  <span class="co"># estrutura dos dados</span>
  <span class="kw">str</span>(dprec)
<span class="co">#&gt; &#39;data.frame&#39;:    1284 obs. of  75 variables:</span>
<span class="co">#&gt;  $ EstacaoCodigo       : int  3054002 3054002 3054002 3054002 3054002 3054002 3054002 3054002 3054002 3054002 ...</span>
<span class="co">#&gt;  $ NivelConsistencia   : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Data                : chr  &quot;01/01/1934&quot; &quot;01/02/1934&quot; &quot;01/03/1934&quot; &quot;01/04/1934&quot; ...</span>
<span class="co">#&gt;  $ TipoMedicaoChuvas   : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Maxima              : num  NA 66.3 55 54.5 30.5 42.5 10.5 30.3 36.8 69.2 ...</span>
<span class="co">#&gt;  $ Total               : num  NA 174.7 160.7 98.4 119.4 ...</span>
<span class="co">#&gt;  $ DiaMaxima           : int  NA 6 9 1 29 13 6 30 19 5 ...</span>
<span class="co">#&gt;  $ NumDiasDeChuva      : int  NA 10 10 4 8 11 7 8 4 7 ...</span>
<span class="co">#&gt;  $ MaximaStatus        : int  0 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ TotalStatus         : int  0 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ NumDiasDeChuvaStatus: int  0 0 0 0 1 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ TotalAnual          : num  NA NA NA NA NA NA NA NA NA NA ...</span>
<span class="co">#&gt;  $ TotalAnualStatus    : int  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva01             : num  NA 15.5 0 54.5 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva02             : num  NA 3.5 0 0 19 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva03             : num  NA 0 0 0 26.7 21.5 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva04             : num  NA 0 0 0 0 12.7 0 0 0 20.8 ...</span>
<span class="co">#&gt;  $ Chuva05             : num  10.5 11.9 0 0 3.2 8.7 0 27.5 0 69.2 ...</span>
<span class="co">#&gt;  $ Chuva06             : num  3 66.3 0 18.5 4.2 0 10.5 0 5 6.1 ...</span>
<span class="co">#&gt;  $ Chuva07             : num  11.1 1 0 0 0 0 4 2.9 0 0 ...</span>
<span class="co">#&gt;  $ Chuva08             : num  0 40 0 19.5 0 0 0 5.4 0 0 ...</span>
<span class="co">#&gt;  $ Chuva09             : num  0 0 55 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva10             : num  0 0 11.7 0 0 0 0 13.6 0 0 ...</span>
<span class="co">#&gt;  $ Chuva11             : num  0 0 5 0 0 27.3 0 0 34.5 0 ...</span>
<span class="co">#&gt;  $ Chuva12             : num  0 1.1 0 0 0 37.5 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva13             : num  0 24.7 7.5 0 0 42.5 1.2 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva14             : num  0 0 9.5 0 0 0 0.7 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva15             : num  0 0 0 0 0 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva16             : num  37.6 0 3 0 0 0 0 1.8 0 0 ...</span>
<span class="co">#&gt;  $ Chuva17             : num  0 0 1 0 0 0 0 17 0 0 ...</span>
<span class="co">#&gt;  $ Chuva18             : num  18.4 0 23 0 0 0 7.2 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva19             : num  12.5 0 0 0 0 0 0 0 36.8 0 ...</span>
<span class="co">#&gt;  $ Chuva20             : num  0 0 0 0 0 0.7 0 0 17.7 0 ...</span>
<span class="co">#&gt;  $ Chuva21             : num  0 0 0 0 20.5 3.2 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva22             : num  67.5 0 0 0 0 3 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva23             : num  12.3 0 0 0 0 0 0 0 0 14 ...</span>
<span class="co">#&gt;  $ Chuva24             : num  0 8.2 0 0 0 33.5 0 0 0 40 ...</span>
<span class="co">#&gt;  $ Chuva25             : num  0 2.5 0 5.9 1.3 0 0 0 0 1 ...</span>
<span class="co">#&gt;  $ Chuva26             : num  0 0 0 0 0 0 1.1 0 0 5.4 ...</span>
<span class="co">#&gt;  $ Chuva27             : num  0 0 0 0 0 0 5.9 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva28             : num  0 0 0 0 14 1 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva29             : num  0 NA 0 0 30.5 0 0 0 0 0 ...</span>
<span class="co">#&gt;  $ Chuva30             : num  0 NA 23.5 0 0 0 0 30.3 0 0 ...</span>
<span class="co">#&gt;  $ Chuva31             : num  0 NA 21.5 NA 0 NA 0 1.8 NA 0 ...</span>
<span class="co">#&gt;  $ Chuva01Status       : int  0 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva02Status       : int  0 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva03Status       : int  0 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva04Status       : int  0 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva05Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva06Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva07Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva08Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva09Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva10Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva11Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva12Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva13Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva14Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva15Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva16Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva17Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva18Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva19Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva20Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva21Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva22Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva23Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva24Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva25Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva26Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva27Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva28Status       : int  1 1 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva29Status       : int  1 0 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva30Status       : int  1 0 1 1 1 1 1 1 1 1 ...</span>
<span class="co">#&gt;  $ Chuva31Status       : int  1 0 1 0 1 0 1 1 0 1 ...</span>
<span class="co"># Fazendo a mesma leitura com read.table</span>
dprec2 &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="dt">file =</span> hidroweb_url_file, 
                   <span class="dt">skip =</span> <span class="dv">15</span>, 
                   <span class="dt">head =</span> T, 
                   <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>,
                   <span class="dt">fill =</span> T,
                   <span class="dt">sep =</span> <span class="st">&quot;;&quot;</span>,
                   <span class="dt">dec =</span> <span class="st">&quot;,&quot;</span>)
<span class="kw">head</span>(dprec2)
<span class="co">#&gt;   X..EstacaoCodigo NivelConsistencia       Data TipoMedicaoChuvas Maxima</span>
<span class="co">#&gt; 1          3054002                 1 01/01/1934                 1     NA</span>
<span class="co">#&gt; 2          3054002                 1 01/02/1934                 1   66.3</span>
<span class="co">#&gt; 3          3054002                 1 01/03/1934                 1   55.0</span>
<span class="co">#&gt; 4          3054002                 1 01/04/1934                 1   54.5</span>
<span class="co">#&gt; 5          3054002                 1 01/05/1934                 1   30.5</span>
<span class="co">#&gt; 6          3054002                 1 01/06/1934                 1   42.5</span>
<span class="co">#&gt;   Total DiaMaxima NumDiasDeChuva MaximaStatus TotalStatus</span>
<span class="co">#&gt; 1    NA        NA             NA            0           0</span>
<span class="co">#&gt; 2 174.7         6             10            1           1</span>
<span class="co">#&gt; 3 160.7         9             10            1           1</span>
<span class="co">#&gt; 4  98.4         1              4            1           1</span>
<span class="co">#&gt; 5 119.4        29              8            1           1</span>
<span class="co">#&gt; 6 191.6        13             11            1           1</span>
<span class="co">#&gt;   NumDiasDeChuvaStatus TotalAnual TotalAnualStatus Chuva01 Chuva02 Chuva03</span>
<span class="co">#&gt; 1                    0         NA                0      NA      NA      NA</span>
<span class="co">#&gt; 2                    0         NA                0    15.5     3.5     0.0</span>
<span class="co">#&gt; 3                    0         NA                0     0.0     0.0     0.0</span>
<span class="co">#&gt; 4                    0         NA                0    54.5     0.0     0.0</span>
<span class="co">#&gt; 5                    1         NA                0     0.0    19.0    26.7</span>
<span class="co">#&gt; 6                    0         NA                0     0.0     0.0    21.5</span>
<span class="co">#&gt;   Chuva04 Chuva05 Chuva06 Chuva07 Chuva08 Chuva09 Chuva10 Chuva11 Chuva12</span>
<span class="co">#&gt; 1      NA    10.5     3.0    11.1     0.0       0     0.0     0.0     0.0</span>
<span class="co">#&gt; 2     0.0    11.9    66.3     1.0    40.0       0     0.0     0.0     1.1</span>
<span class="co">#&gt; 3     0.0     0.0     0.0     0.0     0.0      55    11.7     5.0     0.0</span>
<span class="co">#&gt; 4     0.0     0.0    18.5     0.0    19.5       0     0.0     0.0     0.0</span>
<span class="co">#&gt; 5     0.0     3.2     4.2     0.0     0.0       0     0.0     0.0     0.0</span>
<span class="co">#&gt; 6    12.7     8.7     0.0     0.0     0.0       0     0.0    27.3    37.5</span>
<span class="co">#&gt;   Chuva13 Chuva14 Chuva15 Chuva16 Chuva17 Chuva18 Chuva19 Chuva20 Chuva21</span>
<span class="co">#&gt; 1     0.0     0.0       0    37.6       0    18.4    12.5     0.0     0.0</span>
<span class="co">#&gt; 2    24.7     0.0       0     0.0       0     0.0     0.0     0.0     0.0</span>
<span class="co">#&gt; 3     7.5     9.5       0     3.0       1    23.0     0.0     0.0     0.0</span>
<span class="co">#&gt; 4     0.0     0.0       0     0.0       0     0.0     0.0     0.0     0.0</span>
<span class="co">#&gt; 5     0.0     0.0       0     0.0       0     0.0     0.0     0.0    20.5</span>
<span class="co">#&gt; 6    42.5     0.0       0     0.0       0     0.0     0.0     0.7     3.2</span>
<span class="co">#&gt;   Chuva22 Chuva23 Chuva24 Chuva25 Chuva26 Chuva27 Chuva28 Chuva29 Chuva30</span>
<span class="co">#&gt; 1    67.5    12.3     0.0     0.0       0       0       0     0.0     0.0</span>
<span class="co">#&gt; 2     0.0     0.0     8.2     2.5       0       0       0      NA      NA</span>
<span class="co">#&gt; 3     0.0     0.0     0.0     0.0       0       0       0     0.0    23.5</span>
<span class="co">#&gt; 4     0.0     0.0     0.0     5.9       0       0       0     0.0     0.0</span>
<span class="co">#&gt; 5     0.0     0.0     0.0     1.3       0       0      14    30.5     0.0</span>
<span class="co">#&gt; 6     3.0     0.0    33.5     0.0       0       0       1     0.0     0.0</span>
<span class="co">#&gt;   Chuva31 Chuva01Status Chuva02Status Chuva03Status Chuva04Status</span>
<span class="co">#&gt; 1     0.0             0             0             0             0</span>
<span class="co">#&gt; 2      NA             1             1             1             1</span>
<span class="co">#&gt; 3    21.5             1             1             1             1</span>
<span class="co">#&gt; 4      NA             1             1             1             1</span>
<span class="co">#&gt; 5     0.0             1             1             1             1</span>
<span class="co">#&gt; 6      NA             1             1             1             1</span>
<span class="co">#&gt;   Chuva05Status Chuva06Status Chuva07Status Chuva08Status Chuva09Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             1</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva10Status Chuva11Status Chuva12Status Chuva13Status Chuva14Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             1</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva15Status Chuva16Status Chuva17Status Chuva18Status Chuva19Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             1</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva20Status Chuva21Status Chuva22Status Chuva23Status Chuva24Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             1</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva25Status Chuva26Status Chuva27Status Chuva28Status Chuva29Status</span>
<span class="co">#&gt; 1             1             1             1             1             1</span>
<span class="co">#&gt; 2             1             1             1             1             0</span>
<span class="co">#&gt; 3             1             1             1             1             1</span>
<span class="co">#&gt; 4             1             1             1             1             1</span>
<span class="co">#&gt; 5             1             1             1             1             1</span>
<span class="co">#&gt; 6             1             1             1             1             1</span>
<span class="co">#&gt;   Chuva30Status Chuva31Status  X</span>
<span class="co">#&gt; 1             1             1 NA</span>
<span class="co">#&gt; 2             0             0 NA</span>
<span class="co">#&gt; 3             1             1 NA</span>
<span class="co">#&gt; 4             1             0 NA</span>
<span class="co">#&gt; 5             1             1 NA</span>
<span class="co">#&gt; 6             1             0 NA</span></code></pre></div>
</div>
<div id="bdmep-inmet" class="section level4">
<h4><span class="header-section-number">B.4.1.2</span> <a href="http://www.inmet.gov.br/portal/index.php?r=bdmep/bdmep">BDMEP-INMET</a></h4>
<p>O Banco de Dados Meteorológicos para Ensino e Pesquisa do INMET é uma das principais fonte de dados climáticos brasileiros. Abaixo veremos como importar um arquivo de dados diários de uma estação meteorológica convencional. Os dados foram obtidos no BDMEP e salvos no site do livro.</p>
<p>No trecho de código a seguir baixamos o arquivo de dados da estação 83004.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># arquivo de exemplo disponível no GitHub</span>
bdmep_url_file &lt;-<span class="st"> &quot;https://raw.githubusercontent.com/lhmet/adar-ufsm/master/data/83004.txt&quot;</span>
<span class="co">#arquivo temporário, você pode substituir tempfile() por um caminho de seu computador, p.ex. &quot;~/Downloads/CHUVAS.TXT&quot;</span>
bdmep_dest_file &lt;-<span class="st"> </span><span class="kw">tempfile</span>()
<span class="kw">download.file</span>(
  <span class="dt">url =</span> bdmep_url_file, 
  <span class="dt">destfile =</span> bdmep_dest_file
)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="dt">file =</span> bdmep_dest_file, 
               <span class="dt">header =</span> <span class="ot">FALSE</span>, 
               <span class="dt">skip =</span> <span class="dv">16</span>,
               <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>,
               <span class="dt">na.strings =</span> <span class="st">&quot;&quot;</span>
               )
<span class="kw">head</span>(x)
<span class="co">#&gt;      V1         V2   V3   V4   V5   V6   V7   V8 V9   V10  V11 V12  V13</span>
<span class="co">#&gt; 1 83004 02/08/1993    0 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; NA  &lt;NA&gt; &lt;NA&gt;  NA &lt;NA&gt;</span>
<span class="co">#&gt; 2 83004 01/01/1995    0 &lt;NA&gt; &lt;NA&gt; &lt;NA&gt; 26.8 &lt;NA&gt; NA  &lt;NA&gt; &lt;NA&gt;  NA &lt;NA&gt;</span>
<span class="co">#&gt; 3 83004 01/01/1995 1200 21.2 22.5   20 &lt;NA&gt; 19.5 80 924.6 &lt;NA&gt;  32    4</span>
<span class="co">#&gt; 4 83004 01/01/1995 1800 &lt;NA&gt; 25.2 21.5 &lt;NA&gt; &lt;NA&gt; 73 922.9 &lt;NA&gt;  32    2</span>
<span class="co">#&gt; 5 83004 02/01/1995    0 &lt;NA&gt; 20.7 20.3 28.9 &lt;NA&gt; 97 924.2 &lt;NA&gt;   0    0</span>
<span class="co">#&gt; 6 83004 02/01/1995 1200  3.2 23.8 20.6 &lt;NA&gt; 19.9 76 924.7 &lt;NA&gt;  32    3</span>
<span class="co">#&gt;    V14  V15  V16   V17   V18      V19 V20</span>
<span class="co">#&gt; 1 &lt;NA&gt; &lt;NA&gt;  1.4  &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;  NA</span>
<span class="co">#&gt; 2  1.5 &lt;NA&gt;  1.6 22.04 86.75        2  NA</span>
<span class="co">#&gt; 3 &lt;NA&gt;   10 &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;  NA</span>
<span class="co">#&gt; 4 &lt;NA&gt;   10 &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;  NA</span>
<span class="co">#&gt; 5  1.3   10  1.1 23.32    83 2.666667  NA</span>
<span class="co">#&gt; 6 &lt;NA&gt;   10 &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;     &lt;NA&gt;  NA</span>
<span class="kw">str</span>(x)
<span class="co">#&gt; &#39;data.frame&#39;:    5863 obs. of  20 variables:</span>
<span class="co">#&gt;  $ V1 : chr  &quot;83004&quot; &quot;83004&quot; &quot;83004&quot; &quot;83004&quot; ...</span>
<span class="co">#&gt;  $ V2 : chr  &quot;02/08/1993&quot; &quot;01/01/1995&quot; &quot;01/01/1995&quot; &quot;01/01/1995&quot; ...</span>
<span class="co">#&gt;  $ V3 : int  0 0 1200 1800 0 1200 1800 0 1200 1800 ...</span>
<span class="co">#&gt;  $ V4 : chr  NA NA &quot;21.2&quot; NA ...</span>
<span class="co">#&gt;  $ V5 : chr  NA NA &quot;22.5&quot; &quot;25.2&quot; ...</span>
<span class="co">#&gt;  $ V6 : chr  NA NA &quot;20&quot; &quot;21.5&quot; ...</span>
<span class="co">#&gt;  $ V7 : chr  NA &quot;26.8&quot; NA NA ...</span>
<span class="co">#&gt;  $ V8 : chr  NA NA &quot;19.5&quot; NA ...</span>
<span class="co">#&gt;  $ V9 : int  NA NA 80 73 97 76 66 95 86 94 ...</span>
<span class="co">#&gt;  $ V10: chr  NA NA &quot;924.6&quot; &quot;922.9&quot; ...</span>
<span class="co">#&gt;  $ V11: chr  NA NA NA NA ...</span>
<span class="co">#&gt;  $ V12: int  NA NA 32 32 0 32 32 0 0 5 ...</span>
<span class="co">#&gt;  $ V13: chr  NA NA &quot;4&quot; &quot;2&quot; ...</span>
<span class="co">#&gt;  $ V14: chr  NA &quot;1.5&quot; NA NA ...</span>
<span class="co">#&gt;  $ V15: chr  NA NA &quot;10&quot; &quot;10&quot; ...</span>
<span class="co">#&gt;  $ V16: chr  &quot;1.4&quot; &quot;1.6&quot; NA NA ...</span>
<span class="co">#&gt;  $ V17: chr  NA &quot;22.04&quot; NA NA ...</span>
<span class="co">#&gt;  $ V18: chr  NA &quot;86.75&quot; NA NA ...</span>
<span class="co">#&gt;  $ V19: chr  NA &quot;2&quot; NA NA ...</span>
<span class="co">#&gt;  $ V20: logi  NA NA NA NA NA NA ...</span></code></pre></div>
<p>Os dados lidos não incluíram a linha de cabeçalho com os nomes das variáveis. Nós pulamos essa linha porque o nome das variáveis está de acordo como número de colunas do arquivo. Então se tentarmos ler um arquivo de dados que contém linhas com número de registros diferentes ocorrerá um erro pois os dados não são tabulares.</p>
<p>Outro aspecto nos dados lidos é que aparecem vários <code>&lt;NA&gt;</code>, que é o símbolo para dados do tipo <code>character</code> faltantes. A razão dos terem sido interpretados dessa forma deve-se a um caractere (<code>&lt;/pre&gt;</code>) encontrado na última linha do arquivo.</p>
<p>Para que os dados numéricos não sejam interpretados como caractere nós poderíamos executar a função <code>read.table(..., nrows = 5878)</code>, que ignoraria a última linha do arquivo e os dados seriam interpretados como <code>numeric</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x1 &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="dt">file=</span>bdmep_dest_file, 
               <span class="dt">header =</span> <span class="ot">FALSE</span>, 
               <span class="dt">skip =</span> <span class="dv">16</span>,
               <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>,
               <span class="dt">dec =</span> <span class="st">&quot;.&quot;</span>,
               <span class="dt">na.strings =</span> <span class="st">&quot;&quot;</span>,
               <span class="dt">nrows =</span> <span class="dv">5878</span> 
)
<span class="kw">head</span>(x1)
<span class="co">#&gt;      V1         V2   V3   V4   V5   V6   V7   V8 V9   V10 V11 V12 V13 V14</span>
<span class="co">#&gt; 1 83004 02/08/1993    0   NA   NA   NA   NA   NA NA    NA  NA  NA  NA  NA</span>
<span class="co">#&gt; 2 83004 01/01/1995    0   NA   NA   NA 26.8   NA NA    NA  NA  NA  NA 1.5</span>
<span class="co">#&gt; 3 83004 01/01/1995 1200 21.2 22.5 20.0   NA 19.5 80 924.6  NA  32   4  NA</span>
<span class="co">#&gt; 4 83004 01/01/1995 1800   NA 25.2 21.5   NA   NA 73 922.9  NA  32   2  NA</span>
<span class="co">#&gt; 5 83004 02/01/1995    0   NA 20.7 20.3 28.9   NA 97 924.2  NA   0   0 1.3</span>
<span class="co">#&gt; 6 83004 02/01/1995 1200  3.2 23.8 20.6   NA 19.9 76 924.7  NA  32   3  NA</span>
<span class="co">#&gt;   V15 V16   V17   V18      V19 V20</span>
<span class="co">#&gt; 1  NA 1.4    NA    NA       NA  NA</span>
<span class="co">#&gt; 2  NA 1.6 22.04 86.75 2.000000  NA</span>
<span class="co">#&gt; 3  10  NA    NA    NA       NA  NA</span>
<span class="co">#&gt; 4  10  NA    NA    NA       NA  NA</span>
<span class="co">#&gt; 5  10 1.1 23.32 83.00 2.666667  NA</span>
<span class="co">#&gt; 6  10  NA    NA    NA       NA  NA</span>
<span class="kw">str</span>(x1)
<span class="co">#&gt; &#39;data.frame&#39;:    5863 obs. of  20 variables:</span>
<span class="co">#&gt;  $ V1 : chr  &quot;83004&quot; &quot;83004&quot; &quot;83004&quot; &quot;83004&quot; ...</span>
<span class="co">#&gt;  $ V2 : chr  &quot;02/08/1993&quot; &quot;01/01/1995&quot; &quot;01/01/1995&quot; &quot;01/01/1995&quot; ...</span>
<span class="co">#&gt;  $ V3 : int  0 0 1200 1800 0 1200 1800 0 1200 1800 ...</span>
<span class="co">#&gt;  $ V4 : num  NA NA 21.2 NA NA 3.2 NA NA 4.4 NA ...</span>
<span class="co">#&gt;  $ V5 : num  NA NA 22.5 25.2 20.7 23.8 26.4 22 23 23.4 ...</span>
<span class="co">#&gt;  $ V6 : num  NA NA 20 21.5 20.3 20.6 21.6 21.4 21.3 22.6 ...</span>
<span class="co">#&gt;  $ V7 : num  NA 26.8 NA NA 28.9 NA NA 25.4 NA NA ...</span>
<span class="co">#&gt;  $ V8 : num  NA NA 19.5 NA NA 19.9 NA NA 20.7 NA ...</span>
<span class="co">#&gt;  $ V9 : int  NA NA 80 73 97 76 66 95 86 94 ...</span>
<span class="co">#&gt;  $ V10: num  NA NA 925 923 924 ...</span>
<span class="co">#&gt;  $ V11: num  NA NA NA NA NA NA NA NA NA NA ...</span>
<span class="co">#&gt;  $ V12: int  NA NA 32 32 0 32 32 0 0 5 ...</span>
<span class="co">#&gt;  $ V13: num  NA NA 4 2 0 3 5 0 0 3 ...</span>
<span class="co">#&gt;  $ V14: num  NA 1.5 NA NA 1.3 NA NA 0.2 NA NA ...</span>
<span class="co">#&gt;  $ V15: num  NA NA 10 10 10 10 10 10 10 10 ...</span>
<span class="co">#&gt;  $ V16: num  1.4 1.6 NA NA 1.1 NA NA 1.3 NA NA ...</span>
<span class="co">#&gt;  $ V17: num  NA 22 NA NA 23.3 ...</span>
<span class="co">#&gt;  $ V18: num  NA 86.8 NA NA 83 ...</span>
<span class="co">#&gt;  $ V19: num  NA 2 NA NA 2.67 ...</span>
<span class="co">#&gt;  $ V20: logi  NA NA NA NA NA NA ...</span></code></pre></div>
<p>Outra alternativa seria converter as colunas de interesse (todas exceto as de 1 a 3) para <code>numeric</code> através da função <code>as.numeric()</code> usando a função <code>apply</code> ao longo das colunas:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># corrigindo classe dos dados</span>
<span class="co"># convertendo de character para numeric</span>
x[, <span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)] &lt;-<span class="st"> </span><span class="kw">apply</span>(x[,<span class="op">-</span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)], <span class="dv">2</span>, as.numeric)
<span class="kw">str</span>(x)
<span class="co">#&gt; &#39;data.frame&#39;:    5863 obs. of  20 variables:</span>
<span class="co">#&gt;  $ V1 : chr  &quot;83004&quot; &quot;83004&quot; &quot;83004&quot; &quot;83004&quot; ...</span>
<span class="co">#&gt;  $ V2 : chr  &quot;02/08/1993&quot; &quot;01/01/1995&quot; &quot;01/01/1995&quot; &quot;01/01/1995&quot; ...</span>
<span class="co">#&gt;  $ V3 : int  0 0 1200 1800 0 1200 1800 0 1200 1800 ...</span>
<span class="co">#&gt;  $ V4 : num  NA NA 21.2 NA NA 3.2 NA NA 4.4 NA ...</span>
<span class="co">#&gt;  $ V5 : num  NA NA 22.5 25.2 20.7 23.8 26.4 22 23 23.4 ...</span>
<span class="co">#&gt;  $ V6 : num  NA NA 20 21.5 20.3 20.6 21.6 21.4 21.3 22.6 ...</span>
<span class="co">#&gt;  $ V7 : num  NA 26.8 NA NA 28.9 NA NA 25.4 NA NA ...</span>
<span class="co">#&gt;  $ V8 : num  NA NA 19.5 NA NA 19.9 NA NA 20.7 NA ...</span>
<span class="co">#&gt;  $ V9 : num  NA NA 80 73 97 76 66 95 86 94 ...</span>
<span class="co">#&gt;  $ V10: num  NA NA 925 923 924 ...</span>
<span class="co">#&gt;  $ V11: num  NA NA NA NA NA NA NA NA NA NA ...</span>
<span class="co">#&gt;  $ V12: num  NA NA 32 32 0 32 32 0 0 5 ...</span>
<span class="co">#&gt;  $ V13: num  NA NA 4 2 0 3 5 0 0 3 ...</span>
<span class="co">#&gt;  $ V14: num  NA 1.5 NA NA 1.3 NA NA 0.2 NA NA ...</span>
<span class="co">#&gt;  $ V15: num  NA NA 10 10 10 10 10 10 10 10 ...</span>
<span class="co">#&gt;  $ V16: num  1.4 1.6 NA NA 1.1 NA NA 1.3 NA NA ...</span>
<span class="co">#&gt;  $ V17: num  NA 22 NA NA 23.3 ...</span>
<span class="co">#&gt;  $ V18: num  NA 86.8 NA NA 83 ...</span>
<span class="co">#&gt;  $ V19: num  NA 2 NA NA 2.67 ...</span>
<span class="co">#&gt;  $ V20: num  NA NA NA NA NA NA NA NA NA NA ...</span>
<span class="co"># razão dos avisos</span>
<span class="co">#as.numeric(&quot;NA&quot;)</span></code></pre></div>
<p>Mas e o nome das variáveis? Nós ignoramos a linha de cabeçalho por que nos dados do INMET ocorre uma variável denominada <code>VelocidadeVentoInsolacao</code>. Essa <em>string</em> deveria ser separada em duas. Vamos fazer essa adequação aos dados.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># lendo somente o nome das variaveis</span>
vnames &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="dt">file=</span>bdmep_dest_file, 
                    <span class="dt">header =</span> <span class="ot">FALSE</span>, 
                    <span class="dt">skip =</span> <span class="dv">15</span>,
                    <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>,
                    <span class="dt">dec =</span> <span class="st">&quot;.&quot;</span>,
                    <span class="dt">na.strings =</span> <span class="st">&quot;&quot;</span>,
                    <span class="dt">nrows =</span> <span class="dv">1</span>)
<span class="co"># convertendo de dataframe para vetor</span>
vnames &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">t</span>(vnames))
vnames
<span class="co">#&gt;  [1] &quot;Estacao&quot;                   &quot;Data&quot;                     </span>
<span class="co">#&gt;  [3] &quot;Hora&quot;                      &quot;Precipitacao&quot;             </span>
<span class="co">#&gt;  [5] &quot;TempBulboSeco&quot;             &quot;TempBulboUmido&quot;           </span>
<span class="co">#&gt;  [7] &quot;TempMaxima&quot;                &quot;TempMinima&quot;               </span>
<span class="co">#&gt;  [9] &quot;UmidadeRelativa&quot;           &quot;PressaoAtmEstacao&quot;        </span>
<span class="co">#&gt; [11] &quot;PressaoAtmMar&quot;             &quot;DirecaoVento&quot;             </span>
<span class="co">#&gt; [13] &quot;VelocidadeVentoInsolacao&quot;  &quot;Nebulosidade&quot;             </span>
<span class="co">#&gt; [15] &quot;Evaporacao Piche&quot;          &quot;Temp Comp Media&quot;          </span>
<span class="co">#&gt; [17] &quot;Umidade Relativa Media&quot;    &quot;Velocidade do Vento Media&quot;</span>
<span class="co">#&gt; [19] NA</span>
<span class="co"># número de variáveis é diferente do número de colunas do arquivo</span>
<span class="kw">length</span>(vnames) <span class="op">==</span><span class="st"> </span><span class="kw">ncol</span>(x)
<span class="co">#&gt; [1] FALSE</span>
<span class="co"># corrigindo nomes das variaveis</span>
<span class="co">#   substitui &quot;VelocidadeVentoInsolacao&quot; por &quot;VelocidadeVento&quot;</span>
vnames[<span class="dv">13</span>] &lt;-<span class="st"> &quot;VelocidadeVento&quot;</span>
<span class="co"># acresenta na 14a posição dos nomes a variável &quot;insolacao&quot; e</span>
<span class="co"># desloca os elementos orginais do vetor </span>
vnames &lt;-<span class="st"> </span><span class="kw">c</span>(vnames[<span class="dv">1</span><span class="op">:</span><span class="dv">13</span>], <span class="st">&quot;insolacao&quot;</span>, vnames[<span class="dv">14</span><span class="op">:</span><span class="kw">length</span>(vnames)])
<span class="kw">length</span>(vnames)
<span class="co">#&gt; [1] 20</span>
<span class="kw">ncol</span>(x)
<span class="co">#&gt; [1] 20</span>
<span class="kw">names</span>(x) &lt;-<span class="st"> </span>vnames
<span class="kw">head</span>(x)
<span class="co">#&gt;   Estacao       Data Hora Precipitacao TempBulboSeco TempBulboUmido</span>
<span class="co">#&gt; 1   83004 02/08/1993    0           NA            NA             NA</span>
<span class="co">#&gt; 2   83004 01/01/1995    0           NA            NA             NA</span>
<span class="co">#&gt; 3   83004 01/01/1995 1200         21.2          22.5           20.0</span>
<span class="co">#&gt; 4   83004 01/01/1995 1800           NA          25.2           21.5</span>
<span class="co">#&gt; 5   83004 02/01/1995    0           NA          20.7           20.3</span>
<span class="co">#&gt; 6   83004 02/01/1995 1200          3.2          23.8           20.6</span>
<span class="co">#&gt;   TempMaxima TempMinima UmidadeRelativa PressaoAtmEstacao PressaoAtmMar</span>
<span class="co">#&gt; 1         NA         NA              NA                NA            NA</span>
<span class="co">#&gt; 2       26.8         NA              NA                NA            NA</span>
<span class="co">#&gt; 3         NA       19.5              80             924.6            NA</span>
<span class="co">#&gt; 4         NA         NA              73             922.9            NA</span>
<span class="co">#&gt; 5       28.9         NA              97             924.2            NA</span>
<span class="co">#&gt; 6         NA       19.9              76             924.7            NA</span>
<span class="co">#&gt;   DirecaoVento VelocidadeVento insolacao Nebulosidade Evaporacao Piche</span>
<span class="co">#&gt; 1           NA              NA        NA           NA              1.4</span>
<span class="co">#&gt; 2           NA              NA       1.5           NA              1.6</span>
<span class="co">#&gt; 3           32               4        NA           10               NA</span>
<span class="co">#&gt; 4           32               2        NA           10               NA</span>
<span class="co">#&gt; 5            0               0       1.3           10              1.1</span>
<span class="co">#&gt; 6           32               3        NA           10               NA</span>
<span class="co">#&gt;   Temp Comp Media Umidade Relativa Media Velocidade do Vento Media NA</span>
<span class="co">#&gt; 1              NA                     NA                        NA NA</span>
<span class="co">#&gt; 2           22.04                  86.75                  2.000000 NA</span>
<span class="co">#&gt; 3              NA                     NA                        NA NA</span>
<span class="co">#&gt; 4              NA                     NA                        NA NA</span>
<span class="co">#&gt; 5           23.32                  83.00                  2.666667 NA</span>
<span class="co">#&gt; 6              NA                     NA                        NA NA</span></code></pre></div>
<p>Finalmente vamos escrever os dados do INMET corretamente organizados.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bdmep_dest_file_clean &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;83004_clean.txt&quot;</span>)
<span class="kw">write.csv2</span>(x,
           <span class="dt">file =</span> bdmep_dest_file_clean, 
           <span class="dt">na =</span> <span class="st">&quot;-9999&quot;</span>,
           <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</code></pre></div>
</div>
</div>
<div id="arquivos-formatados-com-largura-fixa" class="section level3">
<h3><span class="header-section-number">B.4.2</span> Arquivos formatados com largura fixa</h3>
<p>Alguns arquivos texto com dados tabulares podem não conter separadores (para p.ex. economizar espaço de disco). Outros arquivos podem ser formatados usando largura fixa para reservar o espaço de cada variável, o que aumenta a legibilidade dos dados em editor de texto.</p>
<p>Nesses casos a função <code>read.fwf()</code> é conveniente. Vamos usar como exemplo o arquivo de dados do Índice de Oscilação Sul (SOI) obtido no site do <a href="http://www.cpc.ncep.noaa.gov">National Weather Service - Climate Prediction Center (NWS-CPC)</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># link para os dados do SOI</span>
noaa_url_file &lt;-<span class="st"> &quot;http://www.cpc.ncep.noaa.gov/data/indices/soi&quot;</span></code></pre></div>
<p>Abrindo o link dos dados no navegador para visualização dos dados.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">browseURL</span>(<span class="dt">url =</span> noaa_url_file)</code></pre></div>
<p>Leitura dos dados:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#soi &lt;- read.fwf(file = link,                           # nome do arquivo ou link</span>
soi &lt;-<span class="st"> </span><span class="kw">read.fwf</span>(<span class="dt">file =</span> noaa_url_file,                       <span class="co"># sem internet, usar esse arquivo</span>
                <span class="dt">skip =</span> <span class="dv">4</span>,                               <span class="co"># pula 4 linhas</span>
                <span class="dt">header =</span> <span class="ot">FALSE</span>,                             <span class="co"># sem cabeçalho</span>
                <span class="dt">nrows =</span> <span class="dv">70</span>,                             <span class="co"># num. de linhas</span>
                <span class="dt">widths =</span> <span class="kw">c</span>(<span class="dv">4</span>, <span class="kw">rep</span>(<span class="dv">6</span>,<span class="dv">12</span>)),                <span class="co"># largura dos campos das variáveis</span>
                <span class="dt">na.strings =</span> <span class="st">&quot;-999.9&quot;</span>,                  <span class="co"># string para dados faltantes</span>
                <span class="dt">col.names =</span> <span class="kw">scan</span>(noaa_url_file,             <span class="co"># varredura do arquivo</span>
                <span class="co">#col.names = scan(link,             # varredura do arquivo</span>
                                 <span class="dt">what =</span> <span class="st">&quot;character&quot;</span>,    <span class="co"># tipo dos dados a serem lidos</span>
                                 <span class="dt">skip =</span> <span class="dv">3</span>,              <span class="co"># pula 3 linhas</span>
                                 <span class="dt">nmax =</span> <span class="dv">13</span>)             <span class="co"># num. max de registros a serem lidos</span>
                )
<span class="kw">head</span>(soi)
<span class="co">#&gt;   YEAR  JAN  FEB  MAR  APR  MAY JUN  JUL  AUG  SEP  OCT  NOV  DEC</span>
<span class="co">#&gt; 1 1951  2.5  1.5 -0.2 -0.5 -1.1 0.3 -1.7 -0.4 -1.8 -1.6 -1.3 -1.2</span>
<span class="co">#&gt; 2 1952 -1.5 -1.0  0.9 -0.4  1.2 1.2  0.8  0.1 -0.4  0.6  0.0 -2.0</span>
<span class="co">#&gt; 3 1953  0.5 -0.8 -0.3  0.3 -2.8 0.2  0.0 -2.0 -2.1  0.1 -0.5 -0.8</span>
<span class="co">#&gt; 4 1954  1.1 -0.5  0.4  1.1  0.8 0.2  0.7  1.8  0.3  0.4  0.2  2.3</span>
<span class="co">#&gt; 5 1955 -0.9  3.1  1.1 -0.2  1.7 2.2  2.6  2.4  2.2  2.5  2.0  1.6</span>
<span class="co">#&gt; 6 1956  2.2  2.7  2.2  1.5  2.3 1.8  1.8  2.0  0.1  2.9  0.2  1.8</span></code></pre></div>
<p>Vamos alterar a estrutura dos dados: ao invés dos dados serem distribuídos ao longo das colunas, vamos estruturá-los como série temporal, ou seja cada valor mensal corresponderá a uma linha.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># converte a matriz de dados para um vetor (em sequencia cronológica)</span>
soi_v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">t</span>(soi[, <span class="op">-</span><span class="dv">1</span>]))
<span class="co"># criando um dataframe com valores de SOI, mes e ano</span>
soi_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">ano =</span> <span class="kw">rep</span>(soi<span class="op">$</span>YEAR, <span class="dt">each =</span> <span class="dv">12</span>),
                     <span class="dt">mes =</span> <span class="kw">rep</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">12</span>, <span class="kw">length</span>(soi[,<span class="dv">1</span>])),
                     <span class="dt">soi =</span> soi_v)
<span class="co"># escrevendo dados SOI em um arquivo CSV</span>
soi_csv_file &lt;-<span class="st"> </span><span class="kw">file.path</span>(<span class="kw">tempdir</span>(), <span class="st">&quot;SOI.csv&quot;</span>)
<span class="kw">write.csv</span>(<span class="dt">x =</span> soi_df, 
          <span class="dt">file =</span> soi_csv_file, 
          <span class="dt">na =</span> <span class="st">&quot;-999.9&quot;</span>, 
          <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Vamos ler os dados reestruturados que foram salvos no formato <a href="http://en.wikipedia.org/wiki/Comma-separated_values">csv</a> usando uma função que permite a escolha do arquivo de forma iterativa.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># leitura de dados com escolha interativa do arquivo</span>
soi.df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> <span class="kw">file.choose</span>(),
                   <span class="co"># file.choose só é válido em sistema *unix</span>
                   <span class="co"># no windows é choose.file()</span>
                   <span class="dt">header =</span> <span class="ot">TRUE</span>,
                   <span class="dt">na.strings =</span> <span class="st">&quot;-999.9&quot;</span>)</code></pre></div>
<p>Navegue até o diretório do arquivo <code>SOI.csv</code> e clique duas vezes sobre ele.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">soi.df &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="dt">file =</span> soi_csv_file,
                   <span class="dt">header =</span> <span class="ot">TRUE</span>,
                   <span class="dt">na.strings =</span> <span class="st">&quot;-999.9&quot;</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(soi.df)
<span class="co">#&gt;    ano mes  soi</span>
<span class="co">#&gt; 1 1951   1  2.5</span>
<span class="co">#&gt; 2 1951   2  1.5</span>
<span class="co">#&gt; 3 1951   3 -0.2</span>
<span class="co">#&gt; 4 1951   4 -0.5</span>
<span class="co">#&gt; 5 1951   5 -1.1</span>
<span class="co">#&gt; 6 1951   6  0.3</span>
<span class="kw">str</span>(soi.df)
<span class="co">#&gt; &#39;data.frame&#39;:    840 obs. of  3 variables:</span>
<span class="co">#&gt;  $ ano: int  1951 1951 1951 1951 1951 1951 1951 1951 1951 1951 ...</span>
<span class="co">#&gt;  $ mes: int  1 2 3 4 5 6 7 8 9 10 ...</span>
<span class="co">#&gt;  $ soi: num  2.5 1.5 -0.2 -0.5 -1.1 0.3 -1.7 -0.4 -1.8 -1.6 ...</span></code></pre></div>
<p>A função <code>read.fortran()</code> é uma função similar à <code>read.fwf()</code> e permite usar especificações de colunas no estilo <a href="http://en.wikipedia.org/wiki/Fortran">Fortran</a>.</p>

<div id="refs" class="references">
<div>
<p>Dasu, Tamraparni, and Theodore Johnson. 2003. “Data Quality.” In <em>Exploratory Data Mining and Data Cleaning</em>, edited by Walter A. Shewhart and Samuel S. Wilks, 99–137. Wiley-Blackwell. doi:<a href="https://doi.org/10.1002/0471448354.ch4">10.1002/0471448354.ch4</a>.</p>
</div>
<div>
<p>Gillespie, Colin, and Robin Lovelace. 2017. <em>Efficient R Programming: A Practical Guide to Smarter Programming</em>. 1st ed. O’Reilly Media, Inc.</p>
</div>
<div>
<p>R Core Team. 2018. <em>R: A Language and Environment for Statistical Computing</em>. Vienna, Austria: R Foundation for Statistical Computing. <a href="https://www.R-project.org/" class="uri">https://www.R-project.org/</a>.</p>
</div>
<div>
<p>Wickham, H. 2014. “Tidy Data.” <em>Journal of Statistical Software, Articles</em> 59 (10): 1–23. doi:<a href="https://doi.org/10.18637/jss.v059.i10">10.18637/jss.v059.i10</a>.</p>
</div>
<div>
<p>Wickham, H., and G. Grolemund. 2017. <em>R for Data Science</em>. O’Reilly Media. <a href="http://r4ds.had.co.nz/" class="uri">http://r4ds.had.co.nz/</a>.</p>
</div>
<div>
<p>Wickham, H., R. Francois, L. Henry, and K. Müller. 2017. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr" class="uri">https://CRAN.R-project.org/package=dplyr</a>.</p>
</div>
</div>
</div>
</div>
<!-- </div> -->














            </section>

          </div>
        </div>
      </div>
<a href="dados-de-pacotes-do-r.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/lhmet/adar-ebook/edit/master/AppendixB.Rmd",
"text": "Edit"
},
"download": ["ADAR.pdf", "ADAR.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
